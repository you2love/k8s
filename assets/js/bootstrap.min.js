// Minimal accordion functionality (Bootstrap alternative)
document.addEventListener('DOMContentLoaded', function() {
    const accordions = document.querySelectorAll('.accordion-button');
    
    accordions.forEach(button => {
        button.addEventListener('click', function() {
            const targetId = this.getAttribute('data-bs-target');
            const targetCollapse = document.querySelector(targetId);
            const parent = this.closest('.accordion-item');
            
            // Close all other accordions in the same parent
            parent.parentElement.querySelectorAll('.accordion-collapse').forEach(collapse => {
                if (collapse !== targetCollapse && !collapse.classList.contains('collapse')) {
                    collapse.classList.remove('show');
                    collapse.parentElement.querySelector('.accordion-button').classList.add('collapsed');
                }
            });
            
            // Toggle current
            if (targetCollapse.classList.contains('show')) {
                targetCollapse.classList.remove('show');
                this.classList.add('collapsed');
            } else {
                targetCollapse.classList.add('show');
                this.classList.remove('collapsed');
            }
        });
    });

    // Concept detail toggling
    const conceptButtons = document.querySelectorAll('.concept-btn');
    
    conceptButtons.forEach(button => {
        button.addEventListener('click', function() {
            const topic = this.getAttribute('data-topic');
            const details = conceptDetails[topic];
            const detailContainer = document.getElementById(topic + '-detail');
            
            if (details && detailContainer) {
                const isHidden = detailContainer.classList.contains('d-none');
                
                document.querySelectorAll('.concept-detail-content').forEach(container => {
                    container.classList.add('d-none');
                });
                
                conceptButtons.forEach(btn => {
                    btn.textContent = '了解更多';
                });
                
                if (isHidden) {
                    detailContainer.innerHTML = details.content;
                    detailContainer.classList.remove('d-none');
                    this.textContent = '收起内容';
                } else {
                    this.textContent = '了解更多';
                }
            }
        });
    });
    
    // Smooth scroll for navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
